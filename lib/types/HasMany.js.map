{"version":3,"sources":["../../src/types/HasMany.js"],"names":[],"mappings":";;;;;;;;;kBAyBwB;;;;;;;;;;;;;;;;IArBX;;;AACX,WADW,OACX,CAAY,KAAZ,EAAmB,MAAnB,EAA2B;0BADhB,SACgB;;uEADhB,qBACgB;;AAEzB,UAAK,KAAL,GAAa,KAAb,CAFyB;AAGzB,UAAK,MAAL,GAAc,UAAU,EAAV,CAHW;;GAA3B;;eADW;;8BAOD,MAAM;;AAEd,UAAI,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,MAAZ,IAAsB,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,GAAZ,EAAiB,MAAM,MAAM,iDAAN,CAAN,CAAvE;AACA,UAAM,QAAQ,KAAK,KAAL,CAAW,KAAK,MAAL,MAAiB,KAAK,MAAL,GAAc,CAAd,CAAjB,CAAnB,CAHQ;AAId,aAAO,KAAK,KAAL,CAAP,CAJc;;;;0BAOV;;;AACJ,UAAM,YAAY,KAAK,EAAL,CAAQ,GAAR,CAAY,KAAK,KAAL,CAAxB,CADF;AAEJ,UAAM,SAAU,KAAK,MAAL,CAAY,MAAZ,IAAsB,KAAK,IAAL,CAAU,KAAK,MAAL,KAAgB,KAAK,MAAL,CAAY,GAAZ,CAAhD,CAFZ;AAGJ,aAAO,qBAAM,CAAN,EAAS,MAAT,EAAiB,GAAjB,CAAqB;eAAM,OAAK,SAAL,CAAe,SAAf;OAAN,CAA5B,CAHI;;;;SAdK;;;AAqBE,SAAS,OAAT,CAAiB,CAAjB,EAAoB,CAApB,EAAuB;AACpC,SAAO,IAAI,OAAJ,CAAY,CAAZ,EAAe,CAAf,CAAP,CADoC;CAAvB","file":"HasMany.js","sourcesContent":["import Plugin from './Plugin'\n\nimport {range} from 'freshman'\n\nexport class HasMany extends Plugin {\n  constructor(model, config) {\n    super()\n    this.model = model\n    this.config = config || {}\n  }\n\n  getRandom(list) {\n\n    if (list.length < this.config.amount || list.length < this.config.max) throw Error('Collection is smaller than the requested amount')\n    const index = Math.round(Math.random() * (list.length - 1))\n    return list[index]\n  }\n\n  run() {\n    const instances = this.db.get(this.model)\n    const amount =  this.config.amount || Math.ceil(Math.random() * this.config.max)\n    return range(0, amount).map(() => this.getRandom(instances))\n  }\n}\n\nexport default function hasMany(a, b) {\n  return new HasMany(a, b);\n}\n"]}